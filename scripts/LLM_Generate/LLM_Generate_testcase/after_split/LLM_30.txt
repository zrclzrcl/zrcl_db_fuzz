CREATE TABLE v7 (v1 INTEGER, v2 TEXT, v3 REAL);
CREATE TEMP VIEW v_view4 AS SELECT v1, COUNT(v3) AS total FROM v7 GROUP BY v1;
CREATE TRIGGER trg8 BEFORE UPDATE ON v7 BEGIN 
    DELETE FROM v7 WHERE v3 < OLD.v3;
END;
INSERT INTO v7 (v1, v2, v3) VALUES (1, 'data1', 2.0), (2, 'data2', 3.0);
UPDATE v7 SET v3 = (SELECT MAX(v3) FROM v7);
SELECT * FROM v_view4 WHERE total > 0;