CREATE TABLE v0 ( v1 INTEGER PRIMARY KEY, v2 TEXT, v3 REAL, v4 TEXT );
CREATE TEMP TRIGGER trg1 AFTER INSERT ON v0 BEGIN 
    UPDATE v0 SET v3 = (SELECT MAX(v3) FROM v0) WHERE v1 = NEW.v1; 
    INSERT INTO v0 (v2, v3) VALUES ('Test', (SELECT COUNT(*) FROM v0)); 
END;
CREATE INDEX idx_v2 ON v0(v2) WHERE v3 > 0;
INSERT INTO v0 (v1, v2, v3) VALUES (1, 'abc', 0.5), (2, 'xyz', 1.5), (3, '123', 2.5);
SELECT * FROM v0 WHERE v2 IN (SELECT v2 FROM v0 WHERE v1 > 1 UNION SELECT v2 FROM v0 WHERE v3 < 2);
