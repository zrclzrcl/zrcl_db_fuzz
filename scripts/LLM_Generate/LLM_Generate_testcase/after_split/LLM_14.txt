CREATE TABLE v2 (v1 INTEGER PRIMARY KEY, v2 TEXT, v3 INTEGER, v4 REAL);
CREATE TEMP TRIGGER trg3 BEFORE DELETE ON v2 BEGIN 
    DELETE FROM v2 WHERE v3 = OLD.v3 AND v1 NOT IN (SELECT v1 FROM v2 WHERE v4 < OLD.v4);
END;
INSERT INTO v2 (v1, v2, v3, v4) VALUES (1, 'data1', 10, 2.0), (2, 'data2', 20, 3.0);
DELETE FROM v2 WHERE v1 = (SELECT MIN(v1) FROM v2);
SELECT * FROM v2 WHERE v4 > (SELECT AVG(v4) FROM v2);
